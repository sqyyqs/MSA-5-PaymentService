Ключевой бизнес-процесс OrchestrPay — обработка платежа на маркетплейсах. Основной сценарий, который вам предстоит спроектировать и разработать:

1) Пользователь оформляет заказ и инициирует платёж.
2) Система списывает деньги с его счёта.
3) Выполняется проверка в антифрод-системе и внешних сервисах (детализация этих проверок за скоупом задания).
4) Если проверка пройдена успешно, деньги переводятся контрагенту.
5) Если операция признаётся подозрительной — она блокируется, клиенту мгновенно возвращаются деньги, а в систему безопасности уходит уведомление для
   анализа.

| Транзакция                 | Описание                                                                            | Тип            | Компенсация    |
|----------------------------|-------------------------------------------------------------------------------------|----------------|----------------| 
| INITIATE_PAYMENT           | создается запись в бд о начале платежа, платежу присваивается статус PENDING        | компенсируемая | CANCEL_PAYMENT |
| CANCEL_PAYMENT             | статус записи платежа в бд обновляется, статус проставляется в CANCEL (safe-delete) | компенсирующая | -              |
| MAKE_PAYMENT               | попытаться списать деньги                                                           | компенсируемая | REFUND_PAYMENT |
| REFUND_PAYMENT             | возврат средств, может возникать при неудачном прохождении антифрод проверки        | компенсирующая | -              |
| ANTI_FRAUD_PROCESS         | провести проверку на предмет фрода, вызов внешних сервисов                          | компенсируемая | NOTIFY_FRAUD   |
| NOTIFY_FRAUD               | производится уведомление службы безопасности для анализа                            | компенсирующая | -              |
| TRANSFER_PAYMENT_TO_SELLER | перевести деньги контрагенту.                                                       | необратимая    | -              |
